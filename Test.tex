\documentclass[10pt]{easychair}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amssymb,mathrsfs}
\pagestyle{plain}
\usepackage{enumitem} 
\usepackage{amsthm}
\usepackage{titlesec}
\usepackage[all]{xy}
\usepackage{tikz}
\usepackage{tikz-cd}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{property}[theorem]{Property}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}

% Newcommand

% Texte
\newcommand\eg{\emph{e.g.}}
\newcommand\ie{\emph{i.e.}}
\newcommand\G{Gröbner}
\newcommand\todo[1]{{\bf\textcolor{red}{#1.}}}
\newcommand\data{{\color{red}\bf data}}

% Raccourcis mathématiques
\newcommand\supp{\text{supp}}
\newcommand\Span[1]{\langle#1\rangle}
\newcommand\diff[1]{\partial_{#1}}
\newcommand\D{\mathcal{D}}
\newcommand\lm{\text{lm}}
\newcommand\lc{\text{lc}}
\newcommand\basis{\mathscr{B}}

% Structures algébriques
\newcommand\K{\mathbb{K}}
\newcommand\F{\mathscr{F}}
\newcommand\Q{\mathbb{Q}}
\newcommand\N{\mathbb{N}}
\newcommand\QX{\mathbb{Q}[x_1,\cdots,x_n]}
\newcommand\QXX{\mathbb{Q}(x_1,\cdots,x_n)}
\newcommand\KX{\K X}
\newcommand\Weyl{B_n(\Q)}

% Réécriture
\newcommand\rewR{\to_R}
\newcommand\rewS{\to_{\hat{S}}}
\newcommand\transR{\overset{*}{\to}_R}
\newcommand\transS{\overset{*}{\to}_{\hat{S}}}
\newcommand\equivR{\overset{*}{\leftrightarrow}_R}
\newcommand\rewTheta{\to_{\Theta}}
\newcommand\NF{\text{NF}}
\newcommand\NFF{\emph{NF}}

\bibliographystyle{plain}



\begin{document}

\title{The Diamond Lemma for non-terminating rewriting systems using deterministic reduction strategies (Long Version)}

\author{
Cyrille Chenavier\inst{1}
\and
Maxime Lucas\inst{2}
}

\institute{
  Inria Lille - Nord Europe, \'Equipe Valse\\
  \email{cyrille.chenavier@inria.fr}
\and
Inria Rennes - Bretagne Atlantique, \'Equipe Gallinette\\
\email{maxime.lucas@inria.fr}
}

\authorrunning{Chenavier and Lucas}
\titlerunning{Running title}

\maketitle

\begin{abstract}
  We study the confluence property for rewriting systems whose underlying set of terms admits a vector space structure. For that, we use deterministic reduction strategies.
  These strategies are based on the choice of standard reductions applied to basis elements.
  We provide a sufficient condition of confluence in terms of the kernel of the operator which computes standard normal forms.
  We present a local criterion which enables us to check the confluence property in this framework.
  We show how this criterion is related to the Diamond Lemma for terminating rewriting systems.
\end{abstract}

\tableofcontents

\todo{plan:
  \begin{itemize}
  \item Section I: IWC theorem
  \item Section 2: rew on rationnal Weyl algebras
    \begin{itemize}
    \item definition of rew. rules and rew. steps
    \item proposition: convergent implies general form of solution to PDE
    \item Janet bases: Janet complete implies existence of a strategy, passivity implies $h$-confluence criterion, as a consequence we recover formal solutions to PDE
    \item $y'=xy$ and Janet example
    \end{itemize}
  \end{itemize}
  Example $y'=xy$, main steps:
  \begin{itemize}
  \item general solution is given by $\Span{u\mid x^{2n+1}}=0$ and $\Span{u\mid x^{2n}}=u(0)/(2^nn!)$
  \item we recover this by rew: we need $(\partial_x)^nx=x(\partial_x)^n+n(\partial_x)^{n-1}$ (using Leibniz identity and induction) and $\Span{u\mid x^n}=1/(n!)(\partial_x)^n(u)_{\mid 0}$ and we prove the previous two formulas by induction (use this example as a running example?)
  \end{itemize}
}

\section{Introduction}

The fact that local confluence together with termination implies
confluence has been known for abstract rewriting systems since
Newman's work~\cite{MR0007372}. For rewriting on noncommutative
polynomials, a similar result known as the Diamond lemma was
introduced by Bergman~\cite{MR506890} nearly 30 years later, in order
to compute normal forms in noncommutative algebras using rewriting
theory. It asserts that for terminating rewriting systems, the local
confluence property can be checked on monomials.

One difficulty of rewriting polynomials is that the naive notion of
rewriting path (obtained as the closure of the generating rewriting
relations under reflexivity, transitivity, sum and product by a
scalar) does not terminate. Instead, one needs to first consider
well-formed rewriting steps before forming the reflexive transitive
closure.

Nevertheless the Diamond lemma has proved to be very useful: together
with the works of Bokut~\cite{MR0506423}, it has given birth the
theory of noncommutative \G\ bases~\cite{MR1299371}. The latter have
provided applications to various areas of noncommutative algebra such
as the study of embedding problems (which appear in the works of Bokut
and Bergman), homological algebra~\cite{MR1072284, MR2110434} or
Koszul duality~\cite{MR1832913, MR0265437}.

Computation of normal forms in noncommutative algebra is also used to
provide formal solutions to partial differential equations. In this
framework, a confluence criterion analogous to the Diamond Lemma is
given by Janet bases~\cite{MR2394773}, which specify a deterministic
way to reduce each polynomial into normal form using standard
reductions~\cite{Mell}. The confluence criterion may then be asserted
as follows: for each monomial $m$ and each non-standard reduction
$m\to f$, $f$ is reducible into $\widehat{m}$, where the latter is
obtained from $m$ using only standard reductions.

In the presented paper, we propose an extension of the Diamond Lemma
which offers two improvements over the one from Bergman: first it
allows the treatment of non-terminating rewriting relations, and
second it does not presuppose a notion of well-formed rewriting
steps. This last property seems particularly promising in order to
extend the Diamond Lemma to other structures.

Instead of supposing that the rewriting relation studied is
terminating, we suppose given an ordering on the monomials,
independent of the rewriting relation.  We then use methods based on
standard reductions: for every monomial $m$, we select exactly one
reduction with left-hand side $m$, which is decreasing for the
ordering chosen. Such choices induce a deterministic way to reduce
each polynomial, obtained by applying simultaneously standard
reductions on every monomial appearing in its decomposition. When
these deterministic reductions terminate, one defines an operator
which maps every polynomial to its unique standard normal form.

From this operator, we define a suitable notion of confluence in
our setting, and show in Proposition~\ref{prop:h-conf_implies_conf}
that it implies the usual notion of confluence for the rewriting
system studied. We then provide an effective method for checking this
criterion in Theorem~\ref{thm:confluence_criterion}. This method is
based on a local analysis corresponding to checking local confluence
on monomials. In particular, when the rewriting system is terminating,
we show (Theorem~\ref{thm:diamond_lemma}) that we recover the Diamond
Lemma as a particular case of Theorem~\ref{thm:confluence_criterion}.

\paragraph{Conventions and notations.}

Throughout the paper, we fix some conventions and notations that we
present now. We will always work with a tuple  $(\K,V,\basis,<)$, where
\begin{itemize}
\item $\K$ is a field
\item $V$ is a $\K$-vector space and $\basis$ is a basis of $V$
\item $<$ is a well-founded order over $\basis$.
\end{itemize}
In the sequel, such a tuple is called a \data. Given a \data, we simply
say ground field, vectors and basis elements for $\K$, elements of $V$
and $\basis$, respectively. Moreover, every vector $v$ admits a unique
finite decomposition with respect to the basis $\basis$ and coefficients
in the ground field:
\begin{equation}\label{equ:vector_decompo}
  v=\sum\lambda_ie_i,\quad\lambda_i\neq 0.
\end{equation}
The set of basis elements which appear in the decomposition
\eqref{equ:vector_decompo} is called the {\it support} of $v$, and is
written $\supp(v)$. We extend $<$ into the multiset order on $V$: for any
$u,v \in V$, we have $u<v$ if $\supp(u)\neq\supp(v)$ and for any
$e\in\supp(u)\setminus\supp(v)$, there exists
$e'\in\supp(v)\setminus\supp(u)$ such that $e'>e$. Notice that this order
coincides with the initial one on basis elements, so that we can denote
it by $<$ without ambiguity.
\medskip

Finally, we use the standard terminology of rewriting theory,
see~\cite{MR1629216}. \todo{Compléter}

\section{A weak version of the DiamondLlemma}
\label{sec:a_weak_version_of_the_Diamond_Lemma}

In this section, we fix a \data\ $(\K,V,\basis,<)$ as well as a subset
$R$ of $\basis\times V$, whose elements are called rewriting rules. Such
a rewriting rule is denoted $e\rewR r$, where $e$ and $r$ are the natural
projections of this rule of $R$ on $\basis$ and $V$, respectively. Our
objective is to provide a confluence criterion for the rewriting system
on $V$ which extends $R$ by linearity.
\medskip

Throughout the section, an element of $V$ which is minimal for the
multiset order~$<$ on $V$ is simply called minimal.

\subsection{Local strategies of linear extensions}
\label{sec:local_strategies_of_linear_extensions}

In this section, we first introduce the notion of linear extension, that
is the rewriting relation on $V$ obtained by extending $R$ by linearity.
Then, we define local strategies for this linear extension, that we use
in Section~\ref{sec:confluence_relative_a_strategy} for introducing our
confluence criterion.
\medskip

The linear extension of $R$ enables us to reduce many basis elements at
once. Hence, we consider elementary reductions of the following form:

\begin{equation}\label{equ:rewriting_step}
  \sum_i\lambda_ie_i+v\to\sum_i\lambda_ir_i+v,
  \smallskip
\end{equation}
where $v$ is a vector, $\lambda_i$ is a scalar and $e_i\rewR r_i$ are
rewriting rules.
\smallskip

\begin{definition}\label{def:extensions}
  The {\em linear extension} of $R$ is the rewriting relation on $V$
  defined such as in \eqref{equ:rewriting_step}, where each $\lambda_i$
  is nonzero and each $e_i$ does not belong to $\supp(v)$. 
\end{definition}
\smallskip

The linear extension of $R$ is still denoted by $\rewR$, and its closures
under transitivity, symmetry and sum and transitivity, symmetry,
reflexivity and sum are denoted by $\transR$ and $\equivR$, respectively.
Finally, a normal form for $\rewR$ is called an $R$-normal form.
\medskip

In the following definition, we introduce the notion of local strategy,
which is the selection of exactly one rewriting rule for each non minimal
basis element. Moreover, the selected rewriting rule as to be compatible
with the order $<$.
\smallskip

\begin{definition}
  A \emph{local strategy} is a subset $S$ of $R$ such that the following
  two conditions hold:
  \begin{itemize}
  \item the left-hand sides of elements of $S$ are not minimal basis
    elements,
  \item for every non minimal basis element $e$, there exists exactly one
    rewriting rule $e\rewR r_e$ in~$S$, moreover we have $r_e<e$.
  \end{itemize}
\end{definition}
\smallskip

Notice that a local strategy may not exist. The elements of such a local
strategy $S$ are denoted~$e\rewS r_e$\footnote{The hat on $S$ is here to
  mark the difference between the local strategy and rewriting rules.}.
Moreover, instead of working with the full linear extension of $S$, we
consider the rewriting relation, also denoted by $\rewS$, which is
defined such as the linear extension of $S$ with the additional property
that there is no rewriting rule $e\rewS r_e$ such that $e\in\supp(v)$. In
other words, a vector $u$ admits a unique decomposition
\[u=\sum_i\lambda_ie_i+v,\]
where $\lambda_i\neq 0$, $e'\in\supp(v)$ implies that $e'$ is minimal,
and $e_i\in\supp(u)\setminus\supp(v')$ is not, and if $e_i\rewS r_i$ are
elements of the local strategy, we have 
\[u\rewS\sum_i\lambda_ir_i+v.
  \smallskip\]
The closure of $\rewS$ under transitivity and symmetry is denoted by
$\transS$. Notice that $u\transS v$ implies $u\transR v$. Moreover, a
normal form for $\rewS$ is called an $S$-normal form. In particular,
every minimal basis element is a $S$-normal form. More generally,
$S$-normal forms can be easily characterised as follows.
\medskip

\begin{lemma}\label{lem:h_normal_forms}
  Given a vector $v$, either $v$ is minimal, or there exists $v'<v$ such
  that $v\rewS v'$. In particular, $S$-normal forms are precisely the
  minimal elements of $V$. 
\end{lemma}
\smallskip

In order to illustrate our notions, we consider the following running
example.
\smallskip

\begin{example}\label{ex:h_norma_form}
  Let $\basis=\{a,b,c,d\}$ and consider the set $R$ composed of the
  following rewriting rules:
  \[a\rewR b,\quad b\rewR c+d,\quad c\rewR b-d.\]
  Note that the linear extension of $R$ is not terminating since there is
  a rewriting loop due to $b\rewR c+d$ and $c+d\rewR (b-d)+d=b$.
  Moreover, we choose the order such that $d$ is minimal and other basis
  elements are not comparable:
  \[a>d,\quad b>d,\quad c>d.\]
  Finally, as a local strategy, we select $S$ defined by:
  \[a\rewS b,\quad b\rewS c+d.\]
  Then, the $R$-normal forms are the elements of the form $\lambda_dd$,
  while the $h$-normal forms are all the expressions of the form
  $\lambda_dd+\lambda_cc$.
\end{example}
\smallskip

We finish this section by introducing the normalisation operator
associated with a local strategy $S$. By definition of such a strategy,
for every $v\in V$, there exists at most one $v'$ such that
$v\rewS v'$. Moreover, since $\rewS$ is compatible with the well-founded
order $<$, $v$ is sent by multiple applications of $\rewS$ to a unique
$S$-normal form that we denote by $\NF(v)$. This defines a map
$\NF:V\to V$, that is fundamental for our confluence criterion of
Section~\ref{sec:confluence_relative_a_strategy}.
\medskip

\begin{proposition}\label{prop:linearity_of_H}
  The map $\NFF$ is a linear projector.
\end{proposition}

\begin{proof}
  The $S$-normal forms are closed under sum, so that $\NF(\NF(v))=\NF(v)$
  for every $v$, that is $\NF$ is a projector. Moreover, if $u\rewS u'$
  and $v\rewS v'$, then we have $u+v\rewS u'+v'$. Iterating~$\rewS$, we
  get $\NF(u+v)=\NF(\NF(u)+\NF(v))=\NF(u)+\NF(v)$, which proves linearity
  of $\NF$.
\end{proof}

\subsection{Confluence relative a strategy}
\label{sec:confluence_relative_a_strategy}

In this section, we first introduce $S$-confluence and show that this
property implies confluence of $\rewR$. Then, we introduce local
$S$-confluence which turns out to imply $S$-confluence: our confluence
criterion follows, and we prove it
Theorem~\ref{thm:confluence_criterion}. We finish this section by a new
proof of the Diamond Lemma, based on local $S$-confluence.
\smallskip

\begin{definition}\label{def:standardisation_property}
  Given a local strategy $S$, we say that $\rewR$ is \emph{S-confluent}
  if for every rewriting rule $e\rewS r_e$, we have $\NF(e-r_e)=0$.
\end{definition}
\smallskip

In the following proposition, we show that $S$-confluence implies
confluence of $\rewR$.
\medskip

\begin{proposition}\label{prop:h_and_R_confluence}
  Let $S$ be a local strategy such that $\rewR$ is $S$-confluent. We have
  $u\equivR v$ if and only if $\NFF(u-v)=0$. Moreover, $\rewR$ is
  confluent.
\end{proposition}

\begin{proof}
  We show the first assertion. The relation $\equivR$ is the closure of
  $\rewR$ under transitivity, symmetry and sum. Since the relation
  $\NF(u-v)=0$ is closed under these operations, we get one implication.
  Reciprocally, if $\NF(u-v)=0$, we have $\NF(u)=\NF(v)$. Moreover, by
  definition of $\NF$, we have $u\transS\NF(u)$ and $v\transS\NF(v)$, and
  since $v_1\transS v_2$ implies $v_1\transR v_2$, we get $u\equivR v$.
  For the second assertion, let us consider three vectors
  $v,v_1,v_2\in V$ such that for $i=1,2$, we have $v\transR v_i$. By the first
  part of the proposition, we have $\NF(v_1)=\NF(v_2)$. From
  $v_i\transS\NF(v_i)$, we get $v_i\transR\NF(v_i)$, so that $\rewR$ is
  confluent.
\end{proof}
\smallskip

Note that the previous proposition is a sufficient but not a necessary
condition. Indeed, with $\basis$ the set of integers and the rewriting
rules $n\rewR n+1$, the linear extension of $R$ is confluent, but there
is no local strategy such that $\rewR$ is confluent relative to this
strategy.
\smallskip

\begin{example}
  Let us continue Example~\ref{ex:h_norma_form}. The following identities
  hold:
  \[\NF(a)=c+d=\NF(b),\qquad\NF(b)=c+d=\NF(c+d),\qquad\NF(c)=c=\NF(b-d),
  \]
  so that $\rewR$ is $S$-confluent, and hence confluent. Notice that if
  we replace the rule $c\rewR b-d$ by $c\rewR b$, we get $\NF(c)=c$ and
  $\NF(b)=c+d$, so $\rewR$ is not $S$-confluent anymore. 
\end{example}
\smallskip

Now, we introduce local $S$-confluence, which is a decreasingness
property with respect to a well-founded order on rewriting rules.
\smallskip

\begin{definition}\label{def:decreasingness_property}
  Let $\prec$ be a well-founded order on $R$ and let $S$ be a local
  strategy. We say that~$\rewR$ is \emph{locally $S$-confluent with
    respect to} $\prec$ if for every $e\in\basis$ and for every rewriting
  rule~$e\rewR r$, we have a confluence diagram:
  \[\large\begin{tikzcd}
  e\ar[r, "_R"']\ar[d, "_{\hat{S}}"'] & r\ar[d, leftrightarrow, dotted, "*"]\\
  r_e\ar[r, leftrightarrow, dotted, "*"] & v
  \end{tikzcd}\]
  where each rewriting step occurring in the dotted arrows belongs to $R$
  (we removed the subscript $R$ for simplicity) and is strictly smaller
  than the rewriting rule $e\rewR r$ relative to $\prec$.
\end{definition}
\smallskip

The main result of this section is the following.
\medskip

\begin{theorem}\label{thm:confluence_criterion}
  Let $R$ be a set of rewriting rules. Assume that there exists a local
  strategy~S and a well-founded order $\prec$ on $R$ such that $\rewR$ is
  locally S-confluent with respect to $\prec$. Then,~$\rewR$ is
  confluent. 
\end{theorem}

\begin{proof}
  It is sufficient to show that $\rewR$ is $S$-confluent.
  
  We reason by induction on rewriting rules $f$ according to the order
  $\prec$. Looking at the square corresponding to $f$:
  \[\large\begin{tikzcd}
  e\ar[r, "f"]\ar[d, "s_e"'] & v\ar[d, leftrightarrow, dotted, "*"]\\
  r_e\ar[r, leftrightarrow, dotted, "*"'] & v'
  \end{tikzcd}\]
  we have $H(e)=H(r_e)$ by definition of $H$, and $H(r_e)=H(v')=H(v)$ by
  induction hypothesis, which concludes the proof.
  \todo{Ce n'est pas hyper clair pour moi. Peux-tu reprendre la fin de la
    preuve?}
\end{proof}
\medskip

Local $h$-confluence implies that the pair of rewriting relations
$(\rewS,\rewR)$ is decreasing with respect to conversions (see
\cite[Definition 3]{van2008confluence}), using the order $\prec$ on $R$
and the discrete ordering on $\rewS$. By
\cite[Theorem 3]{van2008confluence}, this implies that $(\rewS,\rewR)$
commute. Using the fact that $\rewS \subseteq \rewR$, one can then
recover that $\rewR$ is confluent.
\todo{Rajouter un phrase au début faisant comprendre que cette remarque
  s'adresse à des spécialistes de réécriture}
\smallskip

\begin{example}\label{ex:end_to_example}
  Using local $S$-confluence, we way recover that the rewriting relation
  of Example~\ref{ex:h_norma_form} is confluent. Indeed, let us consider
  the following order $\prec$ on rewriting rules:
  \[(a\rewR b)\prec(c\rewR b-d),\quad(b\rewR c+d)\prec(c\rewR b-d).\]
  This choice is guided by the heuristic that rules advancing towards an
  $S$-normal form should be favored over rules that do not: here $c$ is
  an $S$-normal form so its rewriting rule is for $\prec$. The following
  diagrams show that $\rewR$ is locally $S$-confluent:
  \[\large\begin{tikzcd}
  a\ar[r, "_R"']\ar[d, "_{\hat{S}}"'] & b\ar[d, equal] & b\ar[r, "_R"']
  \ar[d, "_{\hat{S}}"'] & c+d\ar[d, equal] & c\ar[r, "_R"']\ar[d,
    "_{\hat{S}}"'] & b-d\ar[d, "_R"]\\
  b\ar[r, equal] & b & c+d\ar[r, equal] & c+d & c\ar[r, equal] & c
  \end{tikzcd}\]
\end{example}
\smallskip

We finish this section by showing how the Diamond Lemma fits as a
particular case of our setup.
\medskip

\begin{theorem}[\cite{MR506890}]\label{thm:diamond_lemma}
  Let $R$ be a set of rewriting rules such that $\rewR$ is terminating,
  and for every $e\in\basis$ such that $e\rewR r$ and $e\rewR r'$, $r$
  and $r'$ are joinable. Then,~$\rewR$ is confluent.
\end{theorem}

\begin{proof}
  We define an ordering $e>e'$ on $\basis$ as the transitive closure of
  the relation ``there exists a vector $v$ such that $e\rewR v$ and
  $e'\in\supp(v)$''. This is a well-founded order since $\rewR$ is
  assumed to be terminating. Let us define the local strategy $S$ as
  follows. First, notice that by definition of the order $<$, if the
  basis element $e$ is not minimal, then it is not an $R$-normal form.
  Then,~$S$ is composed of elements $e\rewS r$, where $e\rewR r$ is an
  arbitrary rewriting rules reducing $e$. It remains to define $\prec$:
  we let $(e\rewR r)\prec(e'\rewR r')$ if $e<e'$, which is well-founded
  since $<$ is. Finally, the hypothesis $r$ and $r'$ are joinable when
  $e\rewR r$ and $e\rewR r'$ implies that $\rewR$ is locally
  $S$-confluent with respect to $\prec$. Hence, by
  Theorem~\ref{thm:confluence_criterion}, $\rewR$ is confluent.   
\end{proof}

\section{Rewriting and partial derivative equations}
\label{sec:rewriting_systems_and_partial_derivative_equations}

\subsection{Rewriting systems on rational Weyl algebras}
\label{sec:rewriting_systems_on_Weyl_algebras}

In this section, we introduce rewriting systems in rational Weyl algebras
and relate them to the framework introduced in
Section~\ref{sec:a_weak_version_of_the_Diamond_Lemma}. Before that, we first
recall the definitions of Weyl algebras and of monomial orders.
\medskip

We fix a set $X=\{x_1,\cdots,x_n\}$ of indeterminates and we denote by
$\Q(X)=\QXX$ the field of fractions of the polynomial algebra $\QX$ over
$\Q$. Let us introduce another set of variables
$\Delta:=\{\diff{1},\cdots,\diff{n}\}$. 

\begin{definition}
  The {\it rational Weyl algebra} over $\Q(X)$ is the set of polynomials
  over the inderminates $\Delta$ and coefficients in $\Q(X)$, subject to
  the following commutation rule:
  \[\diff{i}f=f\diff{i}+\frac{d}{dx_i}(f),\quad f\in\Q(X),\quad
  1\leq i\leq n,\]
  where $d/dx_i:\Q(X)\to\Q(X)$ is the partial derivative operator with
  respect to the indeterminate~$x_i$. This algebra is denoted by $\Weyl$.
\end{definition}

Given $\alpha=(\alpha_1,\cdots,\alpha_n)\in\N^n$, we denote by 
$\partial^{\alpha}:=\diff{1}^{\alpha_1}\cdots\diff{n}^{\alpha_n}$. Notice
that $\Weyl$ is a vector space on $\Q(X)$ and admits as a basis the set
$\left\{\partial^\alpha\mid\alpha\in\N^n\right\}$. Hence, elements of
$\Weyl$ should be thought as differential operators with rational
functions coefficients, and for this reason, a generic element of this
algebra is denoted by $\D$ and is called a differential operator.
\smallskip

\begin{definition}
  A {\em monomial order} $\preceq$ on $\basis$ is a well-founded total
  order that is compatible with multiplication of monomials, \ie,
  $\partial^{\alpha}\preceq\partial^{\beta}$ implies 
  $\partial^{\alpha+\gamma}\preceq\partial^{\beta+\gamma}$, for every
  $\alpha,\beta,\gamma\in\N^n$. For every differential operator
  $\D\in\Weyl$, let us denote by $\lm(\D)$ and $\lc(\D)$ the leading
  monomial and the leading coefficient of $\D$ with respect to $\preceq$,
  respectively, and let us write $r(\D):=\lc(\D)\lm(\D)-\D$. 
\end{definition}
\smallskip

Hence, we get a \data\ $(\Q(X),\Weyl,\Delta^c,\preceq)$

The
framework developed in Section~\ref{sec:a_weak_version_of_diamond_lemma}
can be applied to rational Weyl algebras by taking $\K:=\Q(X)$ and
$\basis:=\left\{\partial^\alpha\mid\alpha\in\N^n\right\}$. In particular,
the support of a differential operator $\D$ is the product of partial
derivative operators which occur in $\D$. It remains to introduce a
well-founded order on $\basis$, and for that, we consider monomial
orders.


Given an operator $\D\in\Weyl$, consider the rewriting relation on
$\Weyl$ defined as follows. Letting $\lm(\D)=\partial^{\alpha}$, we first
have the rewriting steps on monomials defined by
\begin{equation}\label{equ:rew_monomials}
  \forall\beta\in\N^n,\quad\partial^{\alpha+\beta}
  \to_{\D}\partial^{\beta}r(\D),\end{equation}
and then extend \eqref{equ:rew_monomials} by linearity. More generally,
for every set $\Theta=\{\D_1,\cdots,\D_r\}$ of differential operators, we
consider the rewriting system $(\Weyl,\rewTheta)$ defined by
$\D\rewTheta\D'$, whenever $\D\to_{\D_i}\D'$, for some $1\leq i\leq r$.

\todo{Il faudra remonter tout ça au cadre abstrait}

\subsection{Janet bases and $h$-confluence}
\label{sec:Janet_bases_and_h_confluence}

In this section, we take $\K = \mathbb R(x_1,x_2,\ldots,x_n)$ the field of real rational functions in $n$ variables, and look at the $\K$-algebra $A = \K[\partial_1,\ldots,\partial_n]$. We suppose given an ordering $\partial_n > \partial_{n-1} > \ldots > \partial_1$. By monomial, we mean unitary monomial.

\begin{example}
  Elements of $A$ should be thought of as systems of linear partial derivative equations. For example, the equation $x_1 \frac{\partial u}{\partial x_1} - u = 0$ corresponds to the element $x_1 \partial_1 - 1$ in $A$.

  Similarly, the $1$-dimensional heat equation $\frac{\partial u}{\partial t} = \kappa \frac{\partial^2 u}{\partial x^2}$  corresponds (taking $x_1 = t$ and $x_2 = x$) to the element $\partial_1 - \kappa \partial_2^2$.
\end{example}

\begin{definition}
 For any monomial $m$ and $1 \leq k \leq n$ we denote by $\nu_k(m)$ the power of $\partial_k$ in $m$.
For any $\overline j =(j_1,\ldots,j_n) \in \mathbb N^n$, we denote by $\partial^{\overline j}$ the monomial $m$ such that $\nu_k(m) = j_k$ for all $k$. For any subset $E \subset \{1,\ldots,n\}$, we denote by $Mon(E)$ the set of monomials $m$ such that $\nu_k(m) = 0$ for all $k \notin E$. In particular, $Mon(\{1,\ldots,n\}$ is the set of all monomials of $A$ which we denote simply by $Mon$, while $Mon(\emptyset)$ is reduced to $\{1\}$. 
\end{definition}

\begin{definition}
  A \emph{cone} is a pair $(m,E)$, where $m \in A$ and $E \subset \{1,\ldots,n\}$. $m$ is called the \emph{origin of the cone}, while $E$ is the \emph{direction}. A cone is \emph{monomial} if $m$ is a monomial. We denote by $(m,E)^*$ the family of monomials of the form $mp$, where $p \in Mon(E)$.

  If $S$ is a family of monomials, a \emph{cone-partition} of $S$ is a family of monomial cones $(m_i,E_i)$ for $i \in I$ such that for $i \neq j$, $(m_i,E_i)^* \cap (m_j,E_j) = \emptyset$ and $S = \coprod_{i \in I} (m_i,E_i)^*$. In other words the $(m_i,E_i)^*$ form a partition of $S$ into monomial cones. It is a finite cone-partition if $I$ is finite.
\end{definition}


 \begin{definition}
   A family of monomial cones $(m_i,E_i)$ with distinct origins is said to be \emph{complete} if it induces a cone-partition of the monomial ideal generated by the $m_i$s. 

   A family of cones $(p_i,E_i)$ is said to be \emph{complete} if $(lm(p_i),E_i)$ is complete. 
 \end{definition}

 \begin{lemma}
  A complete family of cones gives rise to a local strategy on $A$. 
\end{lemma}
\begin{proof}[\todo{Sketch}]
  We use the monomial ordering on reducible monomials, and reducible ones are bigger than irreducible ones.

  Then we only need to define $h$ on reducible ones. For $x \in Red(R)$, there exists a unique $(m_i,E_i)$ in the cone-partition such that $x=m_i p$ with $p \in E_i$ and $m_i$ corresponds to an element $m_i + r$ of $R$. Then $h$ is defined by $h_x = x = m_ip  \rewR -rp$.
\end{proof}


In order to produce suitable cone-partitions as in the previous lemma, we introduce the notion of multiplicative variables.

\begin{definition}
  Let $M$ be a subset of $Mon$, and let $m  \in M$. We define a subset $\mu_M(m)$ of $\{1,\ldots,n\}$. Let us write $m = \partial_1^{i_1}\partial_2^{i_2}\ldots \partial_n^{i_n}$, and take $k \in \{1,\ldots,n\}$. Then $k \in \mu_M(m)$ if the following implication is true:
  \[
\forall m' \in M, \quad (\forall j < k, \nu_j(m') = \nu_j(m) \, \quad \Rightarrow \quad \, \nu_k(m') \leq \nu_k(m)).
  \]
  

  We call $(m,\mu_M(m))$ the cone of $m$ in $M$. If $M$ is clear then we will just write $\mu(m)$. If $k \in \mu(m)$ we will say that $\partial_k$ is a \emph{multiplicative variable} of $m$.
\end{definition}

\begin{lemma}\label{lem:multiplicative_cones_disjoint}
Let $M \subset Mon$ and $m,m' \in M$. If $m \neq m'$, then $(m,\mu(m))^* \cap (m',\mu(m'))^* = \emptyset$.
\end{lemma}
\begin{proof}
   Since $m \neq m'$, there exists $k$ minimal such that $\nu_k(m) \neq \nu_k(m')$. Without loss of generality, we can suppose $\nu_k(m) < \nu_k(m')$. By definition of $\mu$, we therefore have that $k \notin \mu(m)$.

   Take now $p \in (m,\mu(m))^* \cap (m',\mu(m'))^*$. Then $p = mq$, with $\nu_k(q) = 0$, and so $\nu_k(p) = \nu_k(m)$. But $p$ is a multiple of $m'$ and so $\nu_k(m) = \nu_k(p) \geq \nu_k(m')$, which is contradictory.
 \end{proof}

 \begin{example}
\todo{TODO}
 \end{example}

 \begin{definition}
   A set of monomials $M$ is \emph{Janet-complete} if the family of all $(m,\mu(m))$ is complete.

   A set of polynomials $R$ is \emph{Janet-complete} if $lm(R)$ is Janet-complete.
\end{definition}




\paragraph{Conclusion.} We introduced a sufficient condition, based on deterministic reduction strategies, of confluence for rewriting systems on vector spaces. As a particular case, we recover the Diamond Lemma. This work maybe extended in particular into two main directions. The first one consists in weakening our assumption on the set $\K$ of coefficients, by allowing non invertible coefficients. A second extension consists in characterising Janet bases in this framework, with the objective to develop constructive methods in the analysis and formal resolution of PDE's.

\bibliography{Biblio}

\end{document}

 	

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
