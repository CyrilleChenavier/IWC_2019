\documentclass[10pt]{easychair}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath,amssymb,mathrsfs}
\usepackage{tikz}
\usepackage{tikz-cd}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{property}[theorem]{Property}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}

% Newcommand

%Titre article
\newcommand\titlePaper{{\color{red}\bf Title}}

% Texte
\newcommand\eg{\emph{e.g.}}
\newcommand\ie{\emph{i.e.}}
\newcommand\G{Gröbner}
\newcommand\todo[1]{{\bf\textcolor{red}{#1}}}
\newcommand\fixmecc[1]{{\textcolor{blue}{{\bf Cyrille:} #1}}}
\newcommand\data{{\color{red}\bf data}}

% Raccourcis mathématiques
\DeclareMathOperator{\supp}{supp}
\newcommand\Span[1]{\langle#1\rangle}
\newcommand\diff[1]{\partial_{#1}}
\newcommand\D{\mathcal{D}}
\DeclareMathOperator{\lm}{lm}
\DeclareMathOperator{\lc}{lc}
\newcommand\basis{\mathscr{B}}
\newcommand\SigmaTheta{\Sigma_{\Theta}}
\newcommand\lambdaB{\lambda_\bullet}

% Structures algébriques
\newcommand\K{\mathbb{K}}
\newcommand\F{\mathscr{F}}
\newcommand\Q{\mathbb{Q}} 
\newcommand\N{\mathbb{N}}
\newcommand\QX{\mathbb{Q}[x_1,\cdots,x_n]}
\newcommand\QXX{\mathbb{Q}(x_1,\cdots,x_n)}
\newcommand\KX{\K X}
\newcommand\Weyl[1]{B_{#1}(\Q)}

% Réécriture
\newcommand\rewR{\to_R}
\newcommand\rewS{\twoheadrightarrow_S}
\newcommand\transR{\overset{*}{\to}_R}
\newcommand\transS{\overset{*}{\twoheadrightarrow}_S}
\newcommand\equivR{\overset{*}{\leftrightarrow}_R}
\newcommand\rewTheta{\to_{\Theta}}
\DeclareMathOperator{\SNF}{{\it S}-NF}
\DeclareMathOperator{\NF}{NF}

\bibliographystyle{plain}

\begin{document}

\title{\titlePaper}

\author{
Cyrille Chenavier\inst{1}
\and
Maxime Lucas\inst{2}
}

\institute{
  Inria Lille - Nord Europe, \'Equipe Valse\\
  \email{cyrille.chenavier@inria.fr}
\and
Inria Rennes - Bretagne Atlantique, \'Equipe Gallinette\\
\email{maxime.lucas@inria.fr}
}

\authorrunning{Chenavier and Lucas}
\titlerunning{\titlePaper}

\maketitle

\begin{abstract}
  We study the confluence property for rewriting systems whose underlying set of terms admits a vector space structure. For that, we use deterministic reduction strategies.
  These strategies are based on the choice of standard reductions applied to basis elements.
  We provide a sufficient condition of confluence in terms of the kernel of the operator which computes standard normal forms.
  We present a local criterion which enables us to check the confluence property in this framework.
  We show how this criterion is related to the Diamond Lemma for terminating rewriting systems.
\end{abstract}

\tableofcontents

\todo{plan:
  \begin{itemize}
  \item Section I: IWC theorem
  \item Section 2: rew on rationnal Weyl algebras
    \begin{itemize}
    \item definition of rew. rules and rew. steps
    \item proposition: convergent implies general form of solution to PDE
    \item Janet bases: Janet complete implies existence of a strategy, passivity implies $h$-confluence criterion, as a consequence we recover formal solutions to PDE
    \item $y'=xy$ and Janet example
    \end{itemize}
  \end{itemize}
  Example $y'=xy$, main steps:
  \begin{itemize}
  \item general solution is given by $\Span{u\mid x^{2n+1}}=0$ and $\Span{u\mid x^{2n}}=u(0)/(2^nn!)$
  \item we recover this by rew: we need $(\partial_x)^nx=x(\partial_x)^n+n(\partial_x)^{n-1}$ (using Leibniz identity and induction) and $\Span{u\mid x^n}=1/(n!)(\partial_x)^n(u)_{\mid 0}$ and we prove the previous two formulas by induction (use this example as a running example?)
  \end{itemize}
}

\section{Introduction}

The fact that local confluence together with termination implies
confluence has been known for abstract rewriting systems since
Newman's work~\cite{MR0007372}. For rewriting on noncommutative
polynomials, a similar result known as the Diamond lemma was
introduced by Bergman~\cite{MR506890} nearly 30 years later, in order
to compute normal forms in noncommutative algebras using rewriting
theory. It asserts that for terminating rewriting systems, the local
confluence property can be checked on monomials.

One difficulty of rewriting polynomials is that the naive notion of
rewriting path (obtained as the closure of the generating rewriting
relations under reflexivity, transitivity, sum and product by a
scalar) does not terminate. Instead, one needs to first consider
well-formed rewriting steps before forming the reflexive transitive
closure.

Nevertheless the Diamond lemma has proved to be very useful: together
with the works of Bokut~\cite{MR0506423}, it has given birth the
theory of noncommutative \G\ bases~\cite{MR1299371}. The latter have
provided applications to various areas of noncommutative algebra such
as the study of embedding problems (which appear in the works of Bokut
and Bergman), homological algebra~\cite{MR1072284, MR2110434} or
Koszul duality~\cite{MR1832913, MR0265437}.

Computation of normal forms in noncommutative algebra is also used to
provide formal solutions to partial differential equations. In this
framework, a confluence criterion analogous to the Diamond Lemma is
given by Janet bases~\cite{MR2394773}, which specify a deterministic
way to reduce each polynomial into normal form using standard
reductions~\cite{Mell}. The confluence criterion may then be asserted
as follows: for each monomial $m$ and each non-standard reduction
$m\to f$, $f$ is reducible into $\widehat{m}$, where the latter is
obtained from $m$ using only standard reductions.

In the presented paper, we propose an extension of the Diamond Lemma
which offers two improvements over the one from Bergman: first it
allows the treatment of non-terminating rewriting relations, and
second it does not presuppose a notion of well-formed rewriting
steps. This last property seems particularly promising in order to
extend the Diamond Lemma to other structures.

Instead of supposing that the rewriting relation studied is
terminating, we suppose given an ordering on the monomials,
independent of the rewriting relation.  We then use methods based on
standard reductions: for every monomial $m$, we select exactly one
reduction with left-hand side $m$, which is decreasing for the
ordering chosen. Such choices induce a deterministic way to reduce
each polynomial, obtained by applying simultaneously standard
reductions on every monomial appearing in its decomposition. When
these deterministic reductions terminate, one defines an operator
which maps every polynomial to its unique standard normal form.

From this operator, we define a suitable notion of confluence in
our setting, and show in Proposition~\ref{prop:h-conf_implies_conf}
that it implies the usual notion of confluence for the rewriting
system studied. We then provide an effective method for checking this
criterion in Theorem~\ref{thm:confluence_criterion}. This method is
based on a local analysis corresponding to checking local confluence
on monomials. In particular, when the rewriting system is terminating,
we show (Theorem~\ref{thm:diamond_lemma}) that we recover the Diamond
Lemma as a particular case of Theorem~\ref{thm:confluence_criterion}.

\paragraph{Conventions and notations.}

Throughout the paper, we fix some conventions and notations that we
present now. We will always work with a tuple  $(\K,V,\basis,<)$, where
\begin{itemize}
\item $\K$ is a field
\item $V$ is a $\K$-vector space and $\basis$ is a basis of $V$
\item $<$ is a well-founded order over $\basis$.
\end{itemize}
In the sequel, such a tuple is called a \data. Given a \data, we simply
say ground field, vectors and basis elements for $\K$, elements of $V$
and $\basis$, respectively. Moreover, every vector $v$ admits a unique
finite decomposition with respect to the basis $\basis$ and coefficients
in the ground field:
\begin{equation}\label{equ:vector_decompo}
  v=\sum\lambda_ie_i,\quad\lambda_i\neq 0.
\end{equation}
The set of basis elements which appear in the decomposition
\eqref{equ:vector_decompo} is called the {\it support} of $v$, and is
written $\supp(v)$. We extend $<$ into the multiset order on $V$: for any
$u,v \in V$, we have $u<v$ if $\supp(u)\neq\supp(v)$ and for any
$e\in\supp(u)\setminus\supp(v)$, there exists
$e'\in\supp(v)\setminus\supp(u)$ such that $e'>e$. Notice that this order
coincides with the initial one on basis elements, so that we can denote
it by $<$ without ambiguity.
\medskip

Finally, we use the standard terminology of rewriting theory,
see~\cite{MR1629216}. \todo{Compléter}

\section{A weak version of the Diamond Lemma}
\label{sec:a_weak_version_of_the_Diamond_Lemma}

In this section, we fix a \data\ $(\K,V,\basis,<)$ as well as a subset
$R$ of $\basis\times V$, whose elements are called rewriting rules. Such
a rewriting rule is denoted $e\rewR r$, where $e$ and $r$ are the natural
projections of this rule of $R$ on $\basis$ and $V$, respectively. Our
objective is to provide a confluence criterion for the rewriting system
on $V$ which extends $R$ by linearity.
\medskip

Throughout the section, an element of $V$ which is minimal for the
multiset order~$<$ on $V$ is simply called minimal.

\subsection{Strategies on linear rewriting systems}
\label{sec:strategies_on_linear_rewriting_systems}

In this section, we define strategies of linear rewriting systems, these
strategies are used to introduce our confluence criterion in
Section~\ref{sec:confluence_relative_to_a_strategy}. We first need to
extend the rewriting rules in~$R$ into a rewriting relation on $V$ by
considering elementary reductions of the following form:

\begin{equation}\label{equ:rewriting_step}
  \sum_{i=1}^n\lambda_ie_i+v\to\sum_{i=1}^n\lambda_ir_i+v,
  \smallskip
\end{equation}
where $n$ is a strictly positive integer, $v$ is a vector, and for each
index $i$ in the sum, $\lambda_i$ is a nonzero scalar and $e_i\rewR r_i$
is a rewriting rule. This rewriting relation is still denoted by $\rewR$,
and its closures under transitivity, reflexivity and sum (resp. and
symmetry) is denoted by $\transR$ (resp. $\equivR$). Finally, a normal
form for $\rewR$ is called an $R$-normal form.
\medskip

In the following definition, we introduce strategies, which consist in
selecting exactly one rewriting rule for each non minimal basis element.
Moreover, the selected rewriting rule as to be compatible with the order
$<$.
\smallskip

\begin{definition}
  A \emph{strategy} is a subset $S$ of $R$ such that the following
  two conditions hold:
  \begin{itemize}
  \item the left-hand sides of elements of $S$ are not minimal basis
    elements,
  \item for every non minimal basis element $e$, there exists exactly one
    rewriting rule $e\rewR r_e$ in~$S$, moreover we have $r_e<e$.
  \end{itemize}
\end{definition}
\smallskip

Notice that a strategy may not exist. The elements of a strategy $S$ are
denoted~$e\rewS r_e$\footnote{The double head on the arrow are here to
  mark the difference between strategies and rewriting rules.}. Moreover,
this strategy is extended into the rewriting relation, still denoted by
$\rewS$, defined such as in~\eqref{equ:rewriting_step}, with the
additional property that there is no $e\rewS r_e$ such that
$e\in\supp(v)$. In other words, a vector $u$ admits a unique
decomposition
\[u=\sum_{i=1}^n\lambda_ie_i+v,\]
where each $\lambda_i$ is nonzero, each basis element in $\supp(v)$ is
minimal and each $e_i$ is not, and if $n$ is nonzero and $e_i\rewS r_i$
are elements of the strategy, then we have 
\[u\rewS\sum_{i=1}^n\lambda_ir_i+v.
  \smallskip\]
The closure of $\rewS$ under transitivity and symmetry is denoted by
$\transS$. Notice that $u\transS v$ implies $u\transR v$. Moreover, a
normal form for $\rewS$ is called an $S$-normal form. In particular,
every minimal basis element is a $S$-normal form. More generally,
$S$-normal forms can be easily characterised as follows.
\medskip

\begin{lemma}\label{lem:h_normal_forms}
  Given a vector $v$, either $v$ is minimal, or there exists $v'<v$ such
  that $v\rewS v'$. In particular, $S$-normal forms are precisely the
  minimal elements of $V$. 
\end{lemma}
\smallskip

In order to illustrate our notions, we consider the following running
example.
\smallskip

\begin{example}\label{ex:h_norma_form}
  Let $\basis=\{a,b,c,d\}$ and consider the set $R$ of rewriting rules
  defined as follows:
  \[a\rewR b,\quad b\rewR c+d,\quad c\rewR b-d.\]
  Note that $\rewR$ is not terminating since there is a rewriting loop
  due to $b\rewR c+d$ and $c+d\rewR (b-d)+d=b$. Moreover, we choose the
  order such that $d$ is minimal and other basis elements are not
  comparable:
  \[a>d,\quad b>d,\quad c>d.\]
  Finally, we select the strategy $S$ defined by:
  \[a\rewS b,\quad b\rewS c+d.\]
  Then, the $R$-normal forms are the elements of the form $\lambda_dd$,
  while the $h$-normal forms are all the expressions of the form
  $\lambda_dd+\lambda_cc$.
\end{example}
\smallskip

We finish this section by introducing the normalisation operator of a
strategy $S$. By definition of a strategy, for every $v\in V$, there
exists at most one $v'$ such that $v\rewS v'$. Moreover, since $\rewS$ is
compatible with the well-founded order $<$, $v$ is sent by multiple
applications of~$\rewS$ to a unique $S$-normal form $\SNF(v)$. This
defines a map $\SNF:V\to V$ that will be fundamental for our confluence
criterion in Section~\ref{sec:confluence_relative_to_a_strategy}.
\medskip

\begin{proposition}\label{prop:linearity_of_H}
  The map $\SNF$ is a linear projector.
\end{proposition}

\begin{proof}
  The $S$-normal forms are closed under sum, so that
  $\SNF(\SNF(v))=\SNF(v)$ for every $v$ and $\SNF$ is a projector.
  Moreover, if $u\rewS u'$ and $v\rewS v'$, then we have
  $u+v\rewS u'+v'$. Iterating~$\rewS$, we get
  $\SNF(u+v)=\SNF(\SNF(u)+\SNF(v))=\SNF(u)+\SNF(v)$, which proves
  linearity of $\SNF$.
\end{proof}

\subsection{Confluence relative to a strategy}
\label{sec:confluence_relative_to_a_strategy}

In this section, we first introduce $S$-confluence and show that this
property implies confluence of~$\rewR$. Then, we introduce local
$S$-confluence which turns out to imply $S$-confluence. Finally we define
our confluence criterion for local $S$-confluence, and prove that it is
correct in Theorem~\ref{thm:confluence_criterion}. We finish this section
by a new proof of the Diamond Lemma, based on local $S$-confluence.
\smallskip

\begin{definition}\label{def:standardisation_property}
  Given a strategy $S$, we say that $\rewR$ is \emph{S-confluent} if for
  every rewriting rule~$e\rewR r$, we have $\SNF(e-r)=0$.
\end{definition}
\smallskip

In the following proposition, we show that $S$-confluence implies
confluence of $\rewR$.
\medskip

\begin{proposition}\label{prop:h_and_R_confluence}
  Let $S$ be a strategy such that $\rewR$ is $S$-confluent. We have 
  $u\equivR v$ if and only if $\SNF(u-v)=0$. Moreover, $\rewR$ is
  confluent.
\end{proposition}

\begin{proof}
  We show the first assertion. The relation $\equivR$ is the closure of
  $\rewR$ under transitivity, symmetry and sum. Since the relation
  $\SNF(u-v)=0$ is closed under these operations and contains $\rewR$ by
  hypothesis, we get one implication. Reciprocally, if $\SNF(u-v)=0$,
  then we have $\SNF(u)=\SNF(v)$, and by definition of $\SNF$, we get
  $u\transS\SNF(u)$ and $v\transS\SNF(v)$. Finally $v_1\transS v_2$
  implies $v_1\transR v_2$, and we get $u\equivR v$.

  For the second assertion, let us consider three vectors
  $v,v_1,v_2\in V$ such that for $i=1,2$, we have $v\transR v_i$. By the
  first part of the proposition, we have $\SNF(v_1)=\SNF(v_2)$. Since we
  have $v_i\transS\SNF(v_i)$, we get $v_i\transR\SNF(v_i)$, so that
  $\rewR$ is confluent.
\end{proof}
\smallskip

Note that the previous proposition is a sufficient but not a necessary
condition. Indeed, with $\basis$ the set of integers and the rewriting
rules $n\rewR n+1$, there is no strategy such that $\rewR$ is confluent
relative to this strategy.
\smallskip

\begin{example}
  Let us continue Example~\ref{ex:h_norma_form}. The following identities
  hold:
  \[\SNF(a)=c+d=\SNF(b),\qquad\SNF(b)=c+d=\SNF(c+d),\qquad
  \SNF(c)=c=\SNF(b-d),
  \]
  so that $\rewR$ is $S$-confluent, and hence confluent. Notice that if
  we replace the rule $c\rewR b-d$ by $c\rewR b$, we get $\SNF(c)=c$ and
  $\SNF(b)=c+d$, so $\rewR$ is not $S$-confluent anymore. 
\end{example}
\smallskip

Now, we introduce local $S$-confluence, which is a decreasingness
property with respect to a well-founded order on rewriting rules.
\smallskip

\begin{definition}\label{def:decreasingness_property}
  Let $\prec$ be a well-founded order on $R$ and let $S$ be a strategy.
  We say that~$\rewR$ is \emph{locally $S$-confluent with respect to}
  $\prec$ if for every $e\in\basis$ and for every rewriting rule
  $e\rewR r$, we have a confluence diagram:
  \[\begin{tikzcd}
  e\ar[r, "_R"']\ar[d, twoheadrightarrow, "_S"'] & r\ar[d, leftrightarrow, dotted, "*"', "R"]\\
  r_e\ar[r, leftrightarrow, dotted, "*", "R"'] & v
  \end{tikzcd}\]
  where each rewriting step occurring in the dotted arrows is strictly smaller
  than the rewriting rule $e\rewR r$ relative to $\prec$.
\end{definition}
\smallskip

The main result of this section is the following.
\medskip

\begin{theorem}\label{thm:confluence_criterion}
  Let $R$ be a set of rewriting rules. Assume that there exists a
  strategy S and a well-founded order $\prec$ on $R$ such that $\rewR$ is
  locally S-confluent with respect to $\prec$. Then,~$\rewR$ is
  $S$-confluent, and \emph{a fortiori} confluent. 
\end{theorem}

\begin{proof}
  \todo{Reprendre en faisant attention aux noms des réductions.}
  We reason by induction on rewriting rules $f$ according to the order
  $\prec$. Let us look at the square corresponding to $f$:
  \[\large\begin{tikzcd}
  e\ar[r, "f"]\ar[d, "s_e"'] & v\ar[d, leftrightarrow, dotted, "*"', "f_2"]\\
  r_e\ar[r, leftrightarrow, dotted, "*", "f_1"'] & v'.
  \end{tikzcd}\]
  By local $S$-confluence, every rewriting step appearing
  in $f_1$ and $f_2$ is smaller than $f$.
  Applying the induction hypothesis to each of them we get
  (by definition of $S$-confluence) $\SNF(r_e) = \SNF(v') = \SNF(v)$.
  Since $\SNF(e) = \SNF(r_e)$ by definition of $\SNF$ we get
  $\SNF(e) = \SNF(v)$. By induction, this shows that $\rewR$ is
  $S$-confluent.
\end{proof}
\medskip

\begin{remark}
  Local $S$-confluence implies that the pair of rewriting relations
  $(\rewS,\rewR)$ is decreasing with respect to conversions (see
  \cite[Definition 3]{van2008confluence}), using the order $\prec$ on $R$
  and the discrete ordering on $\rewS$. By
  \cite[Theorem 3]{van2008confluence}, this implies that $(\rewS,\rewR)$
  commute. Using the fact that $\rewS \subseteq \rewR$, one can then
  recover that $\rewR$ is confluent.
\end{remark}
\smallskip

\begin{example}\label{ex:end_to_example}
  Using $S$-confluence, we may recover that the rewriting relation of
  Example~\ref{ex:h_norma_form} is confluent. Indeed, let us consider the
  following order $\prec$ on rewriting rules:
  \[(a\rewR b)\prec(c\rewR b-d),\quad(b\rewR c+d)\prec(c\rewR b-d).\]
  This choice is guided by the heuristic that rules advancing towards an
  $S$-normal form should be favored over rules that do not: here $c$ is
  an $S$-normal form so the rewriting rule rewriting it should be larger
  for the ordering $\prec$.
  The following diagrams show that $\rewR$ is locally $S$-confluent:
  \[\begin{tikzcd}
  a\ar[r, "_R"']\ar[d, twoheadrightarrow, "_S"'] & b\ar[d, equal] & b\ar[r, "_R"']
  \ar[d, twoheadrightarrow, "_S"'] & c+d\ar[d, equal] & c\ar[r, "_R"']\ar[d,
    twoheadrightarrow, "_S"'] & b-d\ar[d, "_R"]\\
  b\ar[r, equal] & b & c+d\ar[r, equal] & c+d & c\ar[r, equal] & c
  \end{tikzcd}\]
\end{example}
\smallskip

We finish this section by showing how the Diamond Lemma fits as a
particular case of our setup.
\medskip

\begin{theorem}[\cite{MR506890}]\label{thm:diamond_lemma}
  Let $R$ be a set of rewriting rules such that $\rewR$ is terminating,
  and for every $e\in\basis$ such that $e\rewR r$ and $e\rewR r'$, $r$
  and $r'$ are joinable. Then,~$\rewR$ is confluent.
\end{theorem}

\begin{proof}
  We define an ordering $e>e'$ on $\basis$ as the transitive closure of
  the relation ``there exists a vector $v$ such that $e\rewR v$ and
  $e'\in\supp(v)$''. This is a well-founded order since $\rewR$ is
  assumed to be terminating. Let us define the strategy $S$ as follows.
  First, notice that by definition of the order $<$, if a basis element
  $e$ is not minimal, then it cannot be an $R$-normal form. Then,~$S$ is
  composed of elements $e\rewS r$, where $e\rewR r$ is an arbitrary
  rewriting rules reducing $e$. It remains to define $\prec$: we let
  $(e\rewR r)\prec(e'\rewR r')$ if $e<e'$, which is well-founded since
  $<$ is. Finally, the hypothesis that $r$ and $r'$ are joinable whenever
  $e\rewR r$ and $e\rewR r'$ implies that $\rewR$ is locally
  $S$-confluent with respect to $\prec$. Hence, by
  Theorem~\ref{thm:confluence_criterion}, $\rewR$ is confluent.   
\end{proof}

\section{Rewriting and partial derivative equations}
\label{sec:rewriting_systems_and_partial_derivative_equations}

\subsection{Rewriting systems on rational Weyl algebras}
\label{sec:rewriting_systems_on_Weyl_algebras}

In this section, we first recall the definitions of rational Weyl
algebras as well as of monomial orders. We then obtain a suitable \data\
on rational Weyl algebas, that we use to define rewriting systems on 
these algebras.
\medskip


We fix a set $X=\{x_1,\cdots,x_n\}$ of indeterminates
and we denote by $\Q(X)=\QXX$ the field of fractions of the polynomial
algebra $\QX$ over $\Q$. Let us introduce another set of variables
$\Delta=\{\diff{1},\cdots,\diff{n}\}$.
\smallskip

\begin{definition}
  As a $\Q(X)$-vector space, the {\it rational Weyl algebra} over $\Q(X)$
  is the polynomial algebra $\Q(X)[\Delta]$ with $\Delta$ as set of
  indeterminates. The multiplication is induce by the relation
  $\partial_i \partial_j = \partial_j \partial_i$ and by the following
  commutation rule:
  \[\diff{i}f=f\diff{i}+\frac{d}{dx_i}(f),\quad f\in\Q(X),\quad
  1\leq i\leq n,\]
  where $d/dx_i:\Q(X)\to\Q(X)$ is the partial derivative operator with
  respect to~$x_i$. This algebra is denoted by $\Weyl{n}$.
\end{definition}
\smallskip

Given $\alpha=(\alpha_1,\cdots,\alpha_n)\in\N^n$, we denote by 
$\partial^{\alpha}=\diff{1}^{\alpha_1}\cdots\diff{n}^{\alpha_n}$. Hence, 
a basis of $\Weyl{n}$ as $\Q(X)$-vector space is the set
\[\Delta^c=\left\{\partial^\alpha\mid\alpha\in\N^n\right\},\]
which is the free commutative monoid over $\Delta$. Elements of
$\Weyl{n}$ should be thought as differential operators with rational
functions coefficients, and for this reason, a generic element of this
algebra is denoted by $\D$ and is called a differential operator. In the
following example, we illustrate how these operators provide an algebraic
model of linear systems of ordinary differential and partial derivative
equations.
\smallskip

\begin{example}\label{ex:diff_operators_init}
  {\color{white}toto}
  \begin{enumerate}
  \item The ordinary differential equation $y'(x)=xy(x)$ is written in
    the form $\D y=0$, where the operator $\D=\partial-x$ belongs to
    $\Weyl{1}=\Q(x)[\partial]$.
  \item\label{it:Janet_example_init} Consider the Janet
    example~\cite{MR3532888}, that is the system of partial derivative
    equations with~$3$ variables and one unknown function:
    $y_{33}=x_2y_{11}$ and $y_{22}=0$, where $y_{ij}$ denotes the second
    order derivative of the unknown function $y$ with respect to the
    variables $x_i$ and~$x_j$. Then, these equations are written
    $\D_1y=0$ and $\D_2y=0$, where $\D_1$ and $\D_2$ are the following
    elements of $\Weyl{3}$:
    \[\D_1=\partial_3^2-x_2\partial_1^2,\quad \D_2=\partial_2^2.\]
  \end{enumerate}
\end{example}
\smallskip

Now, we recall the definition of monomial orders.
\smallskip

\begin{definition}
  A {\em monomial order} $\prec$ on $\basis$ is a well-founded total
  order that is compatible with multiplication of monomials, \ie,
  $\partial^{\alpha}\prec\partial^{\beta}$ implies 
  $\partial^{\alpha+\gamma}\prec\partial^{\beta+\gamma}$, for every
  $\alpha,\beta,\gamma\in\N^n$. Moreover, the $\prec$-{\it \data} on
  $\Weyl{n}$ is the following \data:
  \[(\Q(X),\Weyl{n},\Delta^c,\prec).\]
\end{definition}
\smallskip

Let $\prec$ be a fixed monomial order and let $\D$ be a differential
operator. As usual, we denote by $\lm(\D)$ and $\lc(\D)$ the leading
monomial and the leading coefficient of $\D$ with respect to $\prec$,
respectively, and we also let $r(\D)=\lc(\D)\lm(\D)-\D$. The rewriting
system on $\Weyl{n}$ associated with a set $\Theta=\{\D_1,\cdots,\D_r\}$
of differential operators, is defined by the following rewriting rules:
\[R_{\Theta}=\Big\{\lm(\D_i)\to_{R_\Theta}r(\D_i)\mid 1\leq i\leq r
\Big\}.\]
For simplicity, we write $\D\rewTheta\D'$ instead of
$\D\to_{R_\Theta}\D'$. \todo{Est-ce qu'il faut pas diviser par $\lc(\D)$?}
\smallskip

\begin{example}\label{ex:diff_operators_rew}
  We continue Example~\ref{ex:diff_operators_init}.
  \begin{enumerate}
  \item Let $\D=\partial-x\in\Weyl{1}$. Since $\partial$ is greater than
    $1$ for every monomial order, the rewriting system associated with
    $\Theta=\{\D\}$ extends the rewriting rule $\partial\rewTheta x$.
  \item\label{it:Janet_example_rew} Extending
    $\partial_3\succ\partial_2\succ\partial_1$ into the deglex order, the
    rewriting system associated with the pair $\Theta=\{\D_1,\D_2\}$ of
    the two operators defined in Example~\ref{ex:diff_operators_init}
    extends the two rewriting rules
    $\partial_3^2\rewTheta x_2\partial_1^2$ and
    $\partial_2^2\rewTheta 0$.
  \end{enumerate}
\end{example}
\smallskip

\subsection{Janet bases and $h$-confluence}
\label{sec:Janet_bases_and_h_confluence}

\subsubsection{Cones and strategies}

In this section, by monomial, we mean unitary monomial.

% \begin{example}
%   Elements of $A$ should be thought of as systems of linear partial derivative
%   equations. For example, the equation $x_1 \frac{\partial u}{\partial x_1} - u = 0$
%   corresponds to the element $x_1 \partial_1 - 1$ in $A$.

%   Similarly, the $1$-dimensional heat equation
%   $\frac{\partial u}{\partial t} = \kappa \frac{\partial^2 u}{\partial x^2}$  corresponds (taking $x_1 = t$
%   and $x_2 = x$) to the element $\partial_1 - \kappa \partial_2^2$.
% \end{example}


\begin{definition}
  For any monomial $m$ and $1 \leq k \leq n$ we denote by $\nu_k(m)$
  the power of $\partial_k$ in $m$.
  For any $\overline j =(j_1,\ldots,j_n) \in \mathbb N^n$, we denote by $\partial^{\overline j}$
  the monomial $m$ such that $\nu_k(m) = j_k$ for all $k$. For any subset
  $E \subset \{1,\ldots,n\}$, we denote by $Mon(E)$ the set of monomials $m$ such that
  $\nu_k(m) = 0$ for all $k \notin E$. In particular, $Mon(\{1,\ldots,n\})$ is the set of
  all monomials of $\Weyl n$ which we denote simply by $Mon$, while $Mon(\emptyset)$ is
  reduced to $\{1\}$. 
\end{definition}

\begin{definition}
  A \emph{cone} is a pair $(m,E)$, where $m \in \Weyl n$ and $E \subset \{1,\ldots,n\}$.
  $m$ is called the \emph{origin of the cone}, while $E$
  is the \emph{direction}. A cone is \emph{monomial} if $m$ is a monomial.
  We denote by $(m,E)^*$ the family of monomials of the form $mp$,
  where $p \in Mon(E)$.

  If $S$ is a family of monomials, a \emph{cone-partition} of $S$ is a family
  of monomial cones $(m_i,E_i)$ for $i \in I$ such that for $i \neq j$,
  $(m_i,E_i)^* \cap (m_j,E_j)^* = \emptyset$ and $S = \coprod_{i \in I} (m_i,E_i)^*$.
  In other words the $(m_i,E_i)^*$ form a partition of $S$ into monomial cones.
  It is a finite cone-partition if $I$ is finite.
\end{definition}


 \begin{definition}
   A family of monomial cones $(m_i,E_i)$ with distinct origins is said
   to be \emph{complete} if it induces a cone-partition of the monomial ideal
   generated by the $m_i$'s. 

   A family of cones $(p_i,E_i)$ is said to be \emph{complete}
   if $(\lm(p_i),E_i)$ is complete. 
 \end{definition}

 \begin{lemma}
   Let $m_i$ be a family of elements of $\Weyl n$ with distinct and unitary
   leading monomials, and $R$ be the associated rewriting system.
   
   The data of a family of directions $E_i$ such that $(m_i,E_i)$ yields a
   rewriting strategy $S$ for $R$.
\end{lemma}
\begin{proof}[\todo{Sketch}]
  We use the monomial ordering on reducible monomials,
  and reducible ones are bigger than irreducible ones.

  Then we only need to define $S$ on reducible ones. For $x \in Red(R)$,
  there exists a unique $(m_i,E_i)$ in the cone-partition such that $x=m_i p$
  with $p \in E_i$ and $m_i$ corresponds to an element $m_i + r$ of $R$.
  Then $h$ is defined by $h_x = x = m_ip  \rewR -rp$.
\end{proof}



 \begin{proposition}
   Let $\Theta = \{ \D_1, \D_2, \ldots, \D_k\}$ be a family of elements of $\Weyl n$ with distinct and unitary
   leading monomials, and $R_\Theta$ be the associated rewriting system.
   
   The data of a family of directions $E_i$ such that $(\D_i,E_i)$ forms a complete
   family of cones is equivalent to the data of a rewriting strategy $S_\Theta$ for $R_\Theta$
   such that, if $(e,r_e) \in S_\theta$ and $(me,mr_e) \in S_\Theta$,
   then $(m^k e,m^k r_e) \in S_\Theta$ for all $k \geq 0$.
 \end{proposition}
 \begin{proof}[\todo{I think this is true? In any case a characterisation would be interesting}].

 \end{proof}

 
\begin{definition}
  Let $(\D_i,E_i)$ be a complete family of cones, and $S$ the associated strategy.
  The family of cones $(\D_i,E_i)$ is said to be \emph{passive} if for all
  $v \in E_i^\complement$, $\SNF(v\D_i) = 0$.
\end{definition}

\begin{proposition}
  Let $(\D_i,E_i)$ be a complete family of cones,
  $\Theta = \{\D_1,\ldots \D_k\} $ and $S$ the associated strategy.
  Then $(\D_i,E_i)$ is passive if and only if $R$ is locally $S$-confluent.
\end{proposition}
\begin{proof}
\todo{TODO} 
\end{proof}

In particular, we recover that if a family of differential operators can be
completed into a passive family of cones,
then it induces a convergent rewriting system.

Janet basis allow one to produce such a passive family of cones from a
family of differential operators.

\subsubsection{The case of Janet basis}

In order to produce suitable cone-partitions as in the previous lemma,
we introduce the notion of multiplicative variables.

\begin{definition}
  \fixmecc{Inverser ordre, \ie, $\partial_i<\partial_{i+1}$.}
  Let $M$ be a subset of $Mon$, and let $m  \in M$. We define a subset $\mu_M(m)$
  of $\{1,\ldots,n\}$. Let us write $m = \partial_1^{i_1}\partial_2^{i_2}\ldots \partial_n^{i_n}$, and take
  $k \in \{1,\ldots,n\}$. Then $k \in \mu_M(m)$ if the following implication is true:
  \[
\forall m' \in M, \quad (\forall j < k, \nu_j(m') = \nu_j(m) \, \quad \Rightarrow \quad \, \nu_k(m') \leq \nu_k(m)).
  \]
  

  We call $(m,\mu_M(m))$ the cone of $m$ in $M$. If $M$ is clear then we will
  just write $\mu(m)$. If $k \in \mu(m)$ we will say that $\partial_k$ is a
  \emph{multiplicative variable} of $m$.
\end{definition}

\begin{lemma}\label{lem:multiplicative_cones_disjoint}
Let $M \subset Mon$ and $m,m' \in M$. If $m \neq m'$, then $(m,\mu(m))^* \cap (m',\mu(m'))^* = \emptyset$.
\end{lemma}
\begin{proof}
  Since $m \neq m'$, there exists $k$ minimal such that $\nu_k(m) \neq \nu_k(m')$.
  Without loss of generality, we can suppose $\nu_k(m) < \nu_k(m')$.
  By definition of $\mu$, we therefore have that $k \notin \mu(m)$.

  Take now $p \in (m,\mu(m))^* \cap (m',\mu(m'))^*$. Then $p = mq$, with $\nu_k(q) = 0$,
  and so $\nu_k(p) = \nu_k(m)$. But $p$ is a multiple of $m'$ and so
  $\nu_k(m) = \nu_k(p) \geq \nu_k(m')$, which is contradictory.
 \end{proof}


 \begin{definition}
   A set of monomials $M$ is \emph{Janet-complete} if the family of
   all $(m,\mu(m))$ is complete.

   A set of polynomials $R$ is \emph{Janet-complete} if $lm(R)$ is
   Janet-complete.
 \end{definition}

 
\begin{example}
  Consider the Janet example, see Point~\ref{it:Janet_example_init} of
  Example~\ref{ex:diff_operators_init}: $\Theta=\{\D_1,\D_2\}$, where
  $\D_1=\partial_3^2 -x_2\partial_1^2$ and $\D_2=\partial_2^2$. Writing
  $M:=\lm(\Theta)$, we have:
  \[\mu_M(\partial_3^2)=\{\partial_1,\partial_2,\partial_3\},\quad
  \mu_M(\partial_2^2)=\{\partial_1,\partial_2\}.\]
  Hence, $\Theta$ is not Janet-complete, since $\partial_2^2\partial_3$
  does not belong to the involutive cone of $\lm(\Theta)$.
 \end{example}




 \paragraph{Conclusion.} We introduced a sufficient condition,
 based on deterministic reduction strategies, of confluence for
 rewriting systems on vector spaces. As a particular case,
 we recover the Diamond Lemma. This work maybe extended in particular
 into two main directions. The first one consists in weakening our assumption
 on the set $\K$ of coefficients, by allowing non invertible coefficients.
 A second extension consists in characterising Janet bases in this framework,
 with the objective to develop constructive methods in the analysis and formal
 resolution of PDE's.

\bibliography{Biblio}

\end{document}

 	

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
